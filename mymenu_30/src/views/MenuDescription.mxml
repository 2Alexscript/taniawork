<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:mx="library://ns.adobe.com/flex/mx" 
		backgroundColor="#ffffff"
		creationComplete="init();"
		viewActivate="view1_activateHandler(event)"
		menuKeyPressed="navigator.pushView(Home)"
		backKeyPressed="navigator.popView()" actionBarVisible="false"
		xmlns:s="library://ns.adobe.com/flex/spark" 
		title="Summary" xmlns:components="components.*">
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
	</fx:Style>
	<fx:Script source="../func/menuDescriptionfunctions.as"/>
	<fx:Script source="../func/loadingfunctions.as"/>
	<fx:Declarations>		
		<s:HTTPService id="getMenuItemInformation" method="GET" resultFormat="array"
					   url="http://www.mymenuapp.ca/php/mobile/getMenuItemInformation.php"
					   result="afterGetMenuInformation(event)" >
			<s:request xmlns="">
				<menuid>{data.id}</menuid>		
				<emailGo>{emailGo}</emailGo>		
			</s:request>
		</s:HTTPService>
		<s:HTTPService id="sendReview" method="GET" resultFormat="array"
					   url="http://www.mymenuapp.ca/php/mobile/sendReview.php"
					   result="afterGetMenuInformation(event)" >
			<s:request xmlns="">
				<menuid>{data.id}</menuid>	
				<emailGo>{emailGo}</emailGo>		
				<locationid>{data.locationid}</locationid>		
				<reviewValue>{actualRateValue}</reviewValue>		
				<reviewText>{reviewText.text}</reviewText>		
			</s:request>
		</s:HTTPService>
		<s:HTTPService id="sendEatenThis" method="GET" resultFormat="array"
					   url="http://www.mymenuapp.ca/php/mobile/updateEatenThis.php"
					   result="afterGetEatenThis(event)" >
			<s:request xmlns="">
				<menuid>{data.id}</menuid>	
				<emailGo>{emailGo}</emailGo>	
				<locationid>{data.locationid}</locationid>		
				<eatenvalue>{eatenstatus}</eatenvalue>
			</s:request>
		</s:HTTPService>
		<s:MultiDPIBitmapSource id="eatenthis1"
								source160dpi="@Embed('assets/eatenthis1.png')"
								source240dpi="@Embed('assets/eatenthis1.png')"
								source320dpi="@Embed('assets/eatenthis1.png')"
								source480dpi="@Embed('assets/eatenthis1.png')"
								source640dpi="@Embed('assets/eatenthis1.png')"/>
		<s:MultiDPIBitmapSource id="eatenthis2"
								source160dpi="@Embed('assets/eatenthis2.png')"
								source240dpi="@Embed('assets/eatenthis2.png')"
								source320dpi="@Embed('assets/eatenthis2.png')"
								source480dpi="@Embed('assets/eatenthis2.png')"
								source640dpi="@Embed('assets/eatenthis2.png')"/>
	</fx:Declarations>
	
	<s:Scroller id="scroller" visible="true"  height="100%" horizontalCenter="0" verticalCenter="0"  
				width="100%"  verticalScrollPolicy="on" horizontalScrollPolicy="off" >
		<s:VGroup height="100%" paddingTop="0" gap="20" horizontalCenter="0" verticalCenter="0"  width="100%"  >
			<s:Group width="100%"   id="megacont"  >
				
				<s:BitmapImage id="img1"  width="100%" 	 maxHeight="{this.height/3}"
							   height="100%" source="{data.picture}" 
							   contentLoader="{s_imageCache}" scaleMode="stretch"  />
				<s:BitmapImage  width="100%" height="100%" 
							   contentLoader="{s_imageCache}" scaleMode="stretch"  >
					<s:source>
						<s:MultiDPIBitmapSource source160dpi="@Embed('assets/pictureshadow.png')"
												source240dpi="@Embed('assets/pictureshadow.png')"
												source320dpi="@Embed('assets/pictureshadow.png')"
												source480dpi="@Embed('assets/pictureshadow.png')"
												source640dpi="@Embed('assets/pictureshadow.png')"/>
					</s:source>
				</s:BitmapImage>
				
				<s:Group width="{this.width*0.30}" mouseEnabledWhereTransparent="true" top="50" left="20"  mouseDown="navigator.popView();">
					<s:Image verticalCenter="0" mouseEnabled="false">
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/backbtnnew.png')"
													source240dpi="@Embed('assets/backbtnnew.png')"
													source320dpi="@Embed('assets/backbtnnew.png')"
													source480dpi="@Embed('assets/backbtnnew.png')"
													source640dpi="@Embed('assets/backbtnnew.png')"/>
						</s:source>
					</s:Image>
				</s:Group>
				
				
			</s:Group>
			
			<s:VGroup width="100%" gap="15" paddingLeft="20" paddingRight="20">
				<s:HGroup width="100%"  gap="15" verticalAlign="middle" >
					
					<s:BorderContainer cornerRadius="5" height="65" width="65" horizontalCenter="0" verticalCenter="0"
									   borderAlpha="0" backgroundColor="#b3b3b3" backgroundAlpha="1">
						<s:Label color="#FFFFFF" horizontalCenter="0" styleName="textsize2" id="ratinglabel"
								 text="{data.rating}" fontWeight="bold" verticalCenter="0"/>
					</s:BorderContainer>
					
					<s:VGroup height="100%">
						<s:HGroup width="100%" gap="0">
							<s:Label id="selectedTitle" left="14" right="2" top="13" width="100%" color="#4d4d4d"
									 styleName="textsize6" fontWeight="bold" text="{data.name}"/>
							<s:Label color="#43c7ae"  fontWeight="bold"
									 styleName="textsize3" text=" ${data.cost}"
									 verticalAlign="middle"></s:Label>
						</s:HGroup>
						<s:Label  color="#4d4d4d" fontWeight="bold"
								  styleName="textsize3" text="{data.business_name}"
								  verticalAlign="middle"></s:Label>
					</s:VGroup>
					
				</s:HGroup>
				
				<s:Label width="100%"
						 color="#4d4d4d" fontWeight="normal" id="descriptiontext" styleName="textsize0" click="descriptionclick(event)"
						 text="{data.description}" maxDisplayedLines="4" textDecoration="none"
						 verticalAlign="middle"/>
				
				<s:Group width="100%"  horizontalCenter="0"  verticalCenter="0">
					<s:Image left="0"  verticalCenter="0" click="startReview();">
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/menurate.png')"
													source240dpi="@Embed('assets/menurate.png')"
													source320dpi="@Embed('assets/menurate.png')"
													source480dpi="@Embed('assets/menurate.png')"
													source640dpi="@Embed('assets/menurate.png')"
													/>
						</s:source>
					</s:Image>
					<s:Image right="0"  verticalCenter="0" click="startShare();">
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/menushare.png')"
													source240dpi="@Embed('assets/menushare.png')"
													source320dpi="@Embed('assets/menushare.png')"
													source480dpi="@Embed('assets/menushare.png')"
													source640dpi="@Embed('assets/menushare.png')"
													/>
						</s:source>
					</s:Image>
				</s:Group>
				<s:BorderContainer bottom="0" width="100%" backgroundAlpha="0" borderAlpha="0.5" 
								   borderColor="#b2b2b2" height="1.5" />
				<s:VGroup width="100%" height="100%" id="modificationcontainer">
					<s:Label  left="14" right="2" top="13" width="100%" color="#4d4d4d"
							 styleName="textsize5" fontWeight="bold" text="Modifications"/>
					<s:List  id="modList"  height="100%"
							 width="100%" 
							 verticalScrollPolicy="off" 
							 horizontalScrollPolicy="off" contentBackgroundAlpha="0" 
							 itemRenderer="components.modItem" dataProvider="{modifications}" >
						<s:layout>
							<s:VerticalLayout horizontalAlign="contentJustify" 
											  gap="0"/>
						</s:layout>
					</s:List>
					
				</s:VGroup>
				<s:BorderContainer bottom="0" width="100%" backgroundAlpha="0" borderAlpha="0.5" 
								   borderColor="#b2b2b2" height="1.5" />
				<s:Group height="100%"  width="100%" mouseEnabledWhereTransparent="true" click="eatenClick();">
					<s:Image id="eatenimage" contentLoader="{s_imageCache}" mouseEnabled="false"  visible="false" >
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/eatenthis2.png')"
													source240dpi="@Embed('assets/eatenthis2.png')"
													source320dpi="@Embed('assets/eatenthis2.png')"
													source480dpi="@Embed('assets/eatenthis2.png')"
													source640dpi="@Embed('assets/eatenthis2.png')"/>
						</s:source>
					</s:Image>
					
				</s:Group>
				<s:BorderContainer bottom="0" width="100%" backgroundAlpha="0" borderAlpha="0.5" 
								   borderColor="#b2b2b2" height="1.5" />


				
				<s:Group width="100%" >
					<s:Label  left="0" color="#4D4D4D"
							  fontWeight="bold" styleName="textsize5" text="Reviews"
							  verticalCenter="0"/>
					<s:Image id="topratedrecentimg" right="0"
							 click="topratedrecentclick(event)" verticalCenter="0">
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/topratedrecent1.png')"
													source240dpi="@Embed('assets/topratedrecent1.png')"
													source320dpi="@Embed('assets/topratedrecent1.png')"
													source480dpi="@Embed('assets/topratedrecent1.png')"
													source640dpi="@Embed('assets/topratedrecent1.png')"
													/>
						</s:source>
					</s:Image>
				</s:Group>
				
				<s:List  id="reviewList" 
						 width="100%" 
						 verticalScrollPolicy="off" 
						 horizontalScrollPolicy="off" contentBackgroundAlpha="0" 
						 click="ratingitemclick();"
						 itemRenderer="components.ratingsResultStore">
					<s:layout>
						<s:VerticalLayout horizontalAlign="contentJustify" gap="0"/>
					</s:layout>
				</s:List>
				
				<s:Group width="100%"  click="seemoreclick();" visible="{topreviews.length > 0}" height="80" >
					<s:Label styleName="textsize5"  fontWeight="bold" mouseEnabled="false" color="#b3b3b3" verticalCenter="0"
							 textAlign="center" horizontalCenter="0"  verticalAlign="middle" text="See More"/>
				</s:Group>
				
				
			</s:VGroup>
		</s:VGroup>
	</s:Scroller>
	
	
	<s:BorderContainer id="sharePopup" horizontalCenter="0" verticalCenter="0" visible="false" 
					   height="95%" width="90%"  cornerRadius="10" backgroundAlpha="1" backgroundColor="#43c7ae" borderAlpha="0">
		<s:Group left="0" top="10" click="backOnShare();"  
				 mouseEnabledWhereTransparent="true" width="100" height="50">
			<s:Image mouseEnabled="false" width="40" height="40" horizontalCenter="0" smooth="true"
					verticalCenter="0">
				<s:source>
					<s:MultiDPIBitmapSource source160dpi="@Embed('assets/backbtnnew.png')"
											source240dpi="@Embed('assets/backbtnnew.png')"
											source320dpi="@Embed('assets/backbtnnew.png')"
											source480dpi="@Embed('assets/backbtnnew.png')"
											source640dpi="@Embed('assets/backbtnnew.png')"/>
				</s:source>
			</s:Image>
		</s:Group>
		<s:Group horizontalCenter="0" top="10"  height="50">
			<s:Label height="100%" color="#FFFFFF" styleName="textsize3" text="Share"
					 verticalAlign="middle"/>
		</s:Group>
		<s:Group  click="forwardOnShare();" right="0" top="10" 
				  mouseEnabledWhereTransparent="true"  width="100" height="50">
			<s:Image id="checkshare" width="40" visible="true" height="40" mouseEnabled="false" 
					 horizontalCenter="0" smooth="true" verticalCenter="0">
				<s:source>
					<s:MultiDPIBitmapSource source160dpi="@Embed('assets/checkwhite.png')"
											source240dpi="@Embed('assets/checkwhite.png')"
											source320dpi="@Embed('assets/checkwhite.png')"
											source480dpi="@Embed('assets/checkwhite.png')"
											source640dpi="@Embed('assets/checkwhite.png')"
											/>
				</s:source>
			</s:Image>
		</s:Group>
		<s:BorderContainer x="0" top="65" bottom="60" width="100%" backgroundAlpha="1"
						   backgroundColor="#FFFFFF" borderAlpha="0">
			<s:VGroup width="100%" horizontalAlign="center" gap="20">
				
				
				<s:TextArea id="shareText" width="95%" height="100%" borderVisible="false"
							color="#5D5D5D" fontFamily="Arial" horizontalCenter="0" 
							contentBackgroundAlpha="1" contentBackgroundColor="#FFFFFF"
							prompt="Write something about this dish">
					
				</s:TextArea>
				
			</s:VGroup>
		</s:BorderContainer>
		<s:BorderContainer width="100%"  bottom="0" height="70" cornerRadius="10" 
						   borderAlpha="0" backgroundAlpha="1" backgroundColor="#f2f2f2">
			<s:HGroup paddingLeft="30" top="20" bottom="20" width="100%" gap="80" 
					  verticalAlign="middle">
				<s:Image>
					<s:source>
						<s:MultiDPIBitmapSource source160dpi="@Embed('assets/rate-share.png')"
												source240dpi="@Embed('assets/rate-share.png')"
												source320dpi="@Embed('assets/rate-share.png')"
												source480dpi="@Embed('assets/rate-share.png')"
												source640dpi="@Embed('assets/rate-share.png')"
												/>
					</s:source>
				</s:Image>
				<s:Group width="100" height="100%"  mouseEnabledWhereTransparent="true" click="switchShare(0)">
					<s:Image horizontalCenter="0" verticalCenter="0" 
							 mouseEnabled="false" id="sharefacebook">
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/rate-facebook.png')"
													source240dpi="@Embed('assets/rate-facebook.png')"
													source320dpi="@Embed('assets/rate-facebook.png')"
													source480dpi="@Embed('assets/rate-facebook.png')"
													source640dpi="@Embed('assets/rate-facebook.png')"
													/>
						</s:source>
					</s:Image>
				</s:Group>
				<s:Group width="100" height="100%"  mouseEnabledWhereTransparent="true" click="switchShare(1)">
					<s:Image horizontalCenter="0" verticalCenter="0"
							 mouseEnabled="false" id="sharetwitter">
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/rate-twitter.png')"
													source240dpi="@Embed('assets/rate-twitter.png')"
													source320dpi="@Embed('assets/rate-twitter.png')"
													source480dpi="@Embed('assets/rate-twitter.png')"
													source640dpi="@Embed('assets/rate-twitter.png')"
													/>
						</s:source>
					</s:Image>
				</s:Group>
				
				
			</s:HGroup>
		</s:BorderContainer>
	</s:BorderContainer>
	
	<s:BorderContainer width="100%" visible="{reviewPopupGroup.visible}" height="100%" backgroundAlpha="0.5" backgroundColor="#FFFFFF" horizontalCenter="0" verticalCenter="0">
		<s:Group id="reviewPopupGroup" visible="false"   height="100%" horizontalCenter="0" >
			<s:Image top="0"  horizontalCenter="0" smooth="true">
				<s:source>
					<s:MultiDPIBitmapSource source160dpi="@Embed('assets/reviewpopup.png')"
											source240dpi="@Embed('assets/reviewpopup.png')"
											source320dpi="@Embed('assets/reviewpopup.png')"
											source480dpi="@Embed('assets/reviewpopup.png')"
											source640dpi="@Embed('assets/reviewpopup.png')"
											/>
				</s:source>
			</s:Image>
			<s:Group left="0" top="15" click="backOnMenu();" width="100" height="50">
				<s:Image mouseEnabled="false" width="40" height="40" horizontalCenter="0" smooth="true"
						 verticalCenter="0">
					<s:source>
						<s:MultiDPIBitmapSource source160dpi="@Embed('assets/backbtnnew.png')"
												source240dpi="@Embed('assets/backbtnnew.png')"
												source320dpi="@Embed('assets/backbtnnew.png')"
												source480dpi="@Embed('assets/backbtnnew.png')"
												source640dpi="@Embed('assets/backbtnnew.png')"/>
					</s:source>
					
				</s:Image>
			</s:Group>
			<s:Group mouseEnabled="false"  click="forwardOnMenu();" right="0" top="15"  width="100" height="50">
				<s:Image id="check" width="40" visible="false" height="40" 
						 horizontalCenter="0" smooth="true" verticalCenter="0">
					<s:source>
						<s:MultiDPIBitmapSource source160dpi="@Embed('assets/checkwhite.png')"
												source240dpi="@Embed('assets/checkwhite.png')"
												source320dpi="@Embed('assets/checkwhite.png')"
												source480dpi="@Embed('assets/checkwhite.png')"
												source640dpi="@Embed('assets/checkwhite.png')"
												/>
					</s:source>
				</s:Image>
				<s:Image width="40" id="forward" visible="true" height="40" 
						 horizontalCenter="0" smooth="true" verticalCenter="0">
					<s:source>
						<s:MultiDPIBitmapSource source160dpi="@Embed('assets/forwardBtnWhite.png')"
												source240dpi="@Embed('assets/forwardBtnWhite.png')"
												source320dpi="@Embed('assets/forwardBtnWhite.png')"
												source480dpi="@Embed('assets/forwardBtnWhite.png')"
												source640dpi="@Embed('assets/forwardBtnWhite.png')"
												/>
					</s:source>
				</s:Image>
			</s:Group>
			<s:VGroup width="100%"  paddingTop="145" horizontalAlign="center" gap="0">
				<s:Group width="90%" height="120" horizontalCenter="0" mouseEnabled="false"    >
					<s:HGroup width="100%" gap="0" verticalAlign="middle" height="90%" verticalCenter="0">
						<s:Group height="100%" >
							<s:Image left="10" verticalCenter="0" width="60" height="60" >
								<s:source>
									<s:MultiDPIBitmapSource source160dpi="@Embed('assets/menu-account.png')"
															source240dpi="@Embed('assets/menu-account.png')"
															source320dpi="@Embed('assets/menu-account.png')"
															source480dpi="@Embed('assets/menu-account.png')"
															source640dpi="@Embed('assets/menu-account.png')"
															/>
								</s:source>
							</s:Image>
						</s:Group>
						<s:Group width="20">
							
						</s:Group>
						<s:VGroup width="100%" verticalAlign="middle"  height="100%">
							<s:Label  text="{data.name}"  color="#4d4d4d"  fontWeight="bold" styleName="textsize3" verticalAlign="middle"/>
							
							<s:Label  text="{data.business_name}"  color="#4d4d4d"  styleName="textsize2" verticalAlign="middle"/>
							
						</s:VGroup>
					</s:HGroup>
					<s:BitmapImage id="bmpImg22" right="0"  width="120" 	
								   height="120" source="{data.picture}" 
								   contentLoader="{s_imageCache}"  scaleMode="zoom" />
					<s:BorderContainer height="1.5" width="100%" bottom="0" backgroundAlpha="1" borderAlpha="0" backgroundColor="#b2b2b2"/>
					<s:Image id="reviewseq1" visible="true" top="-75" horizontalCenter="0" >
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/reviewseq1.png')"
													source240dpi="@Embed('assets/reviewseq1.png')"
													source320dpi="@Embed('assets/reviewseq1.png')"
													source480dpi="@Embed('assets/reviewseq1.png')"
													source640dpi="@Embed('assets/reviewseq1.png')"
													/>
						</s:source>
					</s:Image>
					<s:Image id="reviewseq2" visible="false" top="-75" horizontalCenter="0">
						<s:source>
							<s:MultiDPIBitmapSource source160dpi="@Embed('assets/reviewseq2.png')"
													source240dpi="@Embed('assets/reviewseq2.png')"
													source320dpi="@Embed('assets/reviewseq2.png')"
													source480dpi="@Embed('assets/reviewseq2.png')"
													source640dpi="@Embed('assets/reviewseq2.png')"
													/>
						</s:source>
					</s:Image>
				</s:Group>
				<s:Group width="100%" height="100%" >
					<s:Group id="grholder"  y="10" mouseEnabledWhereTransparent="true" visible="false"
							 width="400" height="400" horizontalCenter="0">
						<s:Group id="gr" width="200" mouseEnabledWhereTransparent="true"   height="200" blendMode="layer" cacheAsBitmap="true"
								 horizontalCenter="0" verticalCenter="0">
							
							<s:Group width="200" height="200" mouseEnabledWhereTransparent="true"  blendMode="erase" cacheAsBitmap="true"
									 horizontalCenter="0" verticalCenter="0">
								<s:Ellipse width="200"   height="200" 
										   horizontalCenter="0" verticalCenter="0" >
									<s:fill>
										<s:SolidColor color="0"/>
									</s:fill>
								</s:Ellipse>
							</s:Group>
						</s:Group>
						<s:Label id="ratevalue" color="#808080" fontWeight="bold" horizontalCenter="-2" fontSize="110"
								 text="10" textAlign="center" verticalAlign="bottom" verticalCenter="6"/>
						<s:Label text="Confirm" bottom="-60" click="forwardOnMenu();"  color="#4d4d4d"
								  mouseOver="tOver(event)" mouseOut="tOut(event)" mouseDown="tOut(event)" mouseUp="tOut(event)"
								 fontWeight="bold" styleName="textsize3" horizontalCenter="0"/>
					</s:Group>
					<s:Group id="writeholder" visible="false" x="10" y="0" width="580" height="925">
						<s:VGroup width="100%" horizontalAlign="center" gap="20">
							
							
							<s:TextArea id="reviewText" width="95%" height="100%" borderVisible="false"
										color="#5D5D5D" fontFamily="Arial" horizontalCenter="0" contentBackgroundAlpha="1" contentBackgroundColor="#FFFFFF"
										prompt="Write someting about this dish">
								
							</s:TextArea>
							<s:BorderContainer visible="false" backgroundAlpha="1" backgroundColor="#f2f2f2" borderAlpha="0" 
											   bottom="0" width="100%" horizontalCenter="0">
								<s:HGroup paddingLeft="30" top="20" bottom="20" width="100%" gap="80" verticalAlign="middle">
									<s:Image>
										<s:source>
											<s:MultiDPIBitmapSource source160dpi="@Embed('assets/rate-share.png')"
																	source240dpi="@Embed('assets/rate-share.png')"
																	source320dpi="@Embed('assets/rate-share.png')"
																	source480dpi="@Embed('assets/rate-share.png')"
																	source640dpi="@Embed('assets/rate-share.png')"
																	/>
										</s:source>
									</s:Image>
									<s:Image>
										<s:source>
											<s:MultiDPIBitmapSource source160dpi="@Embed('assets/rate-facebook.png')"
																	source240dpi="@Embed('assets/rate-facebook.png')"
																	source320dpi="@Embed('assets/rate-facebook.png')"
																	source480dpi="@Embed('assets/rate-facebook.png')"
																	source640dpi="@Embed('assets/rate-facebook.png')"
																	/>
										</s:source>
									</s:Image>
									<s:Image>
										<s:source>
											<s:MultiDPIBitmapSource source160dpi="@Embed('assets/rate-twitter.png')"
																	source240dpi="@Embed('assets/rate-twitter.png')"
																	source320dpi="@Embed('assets/rate-twitter.png')"
																	source480dpi="@Embed('assets/rate-twitter.png')"
																	source640dpi="@Embed('assets/rate-twitter.png')"
																	/>
										</s:source>
									</s:Image>
								</s:HGroup>
								
							</s:BorderContainer>
						</s:VGroup>
					</s:Group>
				</s:Group>
			</s:VGroup>
		</s:Group>
	</s:BorderContainer>
	
	
</s:View>