<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
			   xmlns:graphics="assets.graphics.*"
			   xmlns:s="library://ns.adobe.com/flex/spark"
			   xmlns:amcharts="http://www.amcharts.com/com_internal"
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   xmlns:components="com.hillelcoren.components.*"
			   minWidth="955" minHeight="600" backgroundColor="#5C81AD"
			   pageTitle="Frequency Grapher" preloaderChromeColor="#5C81AD"
			  >
	<fx:Style >
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace graphics "assets.graphics.*";
		@namespace amcharts "http://www.amcharts.com/com_internal";
		@namespace mx "library://ns.adobe.com/flex/mx";
		@font-face {
			src: url("assets/MyriadPro-Regular.otf");
			fontFamily: Myriad Pro;
			embedAsCFF:true;
			advancedAntiAliasing: true;
		}
		
		@font-face {
			src: url("assets/MinionPro-Regular.otf");
			fontFamily: Minion Pro;
			embedAsCFF:true;
			advancedAntiAliasing: true;
		}
		
		@font-face {
			src: url("assets/CALIBRI.TTF");
			fontFamily: Calibri;
			embedAsCFF:true;
			advancedAntiAliasing: true;
		}
		
	</fx:Style>
	<fx:Script source="func/screenshot.as" />
	<fx:Script>
		<![CDATA[
			import flash.filters.DropShadowFilter;
			import mx.controls.Alert;
			import com.hillelcoren.events.FieldMapperEvent;
			import mx.utils.ObjectUtil;
			import mx.managers.PopUpManager;
			import com.hillelcoren.components.FieldMapper;
			import com.hillelcoren.utils.DataGridUtils;
			import com.hillelcoren.vos.Person;
			import mx.collections.ArrayCollection;
			
			import mx.collections.ArrayCollection;
			import mx.collections.Sort;
			import mx.collections.SortField;
			import mx.core.IUIComponent;
			import mx.graphics.ImageSnapshot;
			import mx.graphics.Stroke;
			import mx.rpc.events.ResultEvent;
			private var fileToDownload:FileReference;
			public var serveraddress:String = "";
			public var serveruser:String = "";
			public var serverpass:String = "";
			public var databasename:String = "";
			public var tablename:String = "";
			public var searchcolumn:String = "";
			public var datecolumn:String = "";
			public var datasetname:String = "";
			public var datetype:String = "";
			[Bindable]
			public var legendArray:ArrayCollection = new ArrayCollection();
			[Bindable]
			public var seriesArray:Array = new Array();
			[Bindable]
			public var preArray:ArrayCollection = new ArrayCollection();
			[Bindable]
			private var shadow:DropShadowFilter = new DropShadowFilter(2,45,0,0.5);
			[Bindable]
			public var displayType:String = "segment";
			[Bindable]
			public var s1:String = "";
			[Bindable]
			public var s2:String = "";
			[Bindable]
			public var s3:String = "";
			[Bindable]
			public var s4:String = "";
			[Bindable]
			public var s5:String = "";
			[Bindable]
			public var s6:String = "";
			[Bindable]
			public var s7:String = "";
			[Bindable]
			public var s8:String = "";
			[Bindable]
			public var s9:String = "";
			[Bindable]
			public var s10:String = "";
			[Bindable]
			public var freqArray:ArrayCollection = new ArrayCollection();
			[Bindable]
			private var displayArray:ArrayCollection = new ArrayCollection();
			public var maxNumOfVars:uint = 13;
			public var currentlySearching:Number = -1;
			public var usedArray:Array = new Array();
			[Bindable]
			public var rotationArray:ArrayCollection = new ArrayCollection();
			[Bindable]
			public var colorArray:Array = new Array();
			
			public function redoUsedArray():void {
				usedArray = new Array();
				for (var i:uint = 0; i < maxNumOfVars; i++){
					usedArray.push(false);
				}
				var stroke1:Stroke = vvar1.getStyle("lineStroke");
				var stroke2:Stroke = vvar2.getStyle("lineStroke");
				var stroke3:Stroke = vvar3.getStyle("lineStroke");
				var stroke4:Stroke = vvar4.getStyle("lineStroke");
				var stroke5:Stroke = vvar5.getStyle("lineStroke");
				var stroke6:Stroke = vvar6.getStyle("lineStroke");
				var stroke7:Stroke = vvar7.getStyle("lineStroke");
				var stroke8:Stroke = vvar8.getStyle("lineStroke");
				var stroke9:Stroke = vvar9.getStyle("lineStroke");
				var stroke10:Stroke = vvar10.getStyle("lineStroke");
				var stroke11:Stroke = vvar11.getStyle("lineStroke");
				var stroke12:Stroke = vvar12.getStyle("lineStroke");
				var stroke13:Stroke = vvar13.getStyle("lineStroke");
				
				colorArray = new Array();
				colorArray.push(stroke1.color);
				colorArray.push(stroke2.color);
				colorArray.push(stroke3.color);
				colorArray.push(stroke4.color);
				colorArray.push(stroke5.color);
				colorArray.push(stroke6.color);
				colorArray.push(stroke7.color);
				colorArray.push(stroke8.color);
				colorArray.push(stroke9.color);
				colorArray.push(stroke10.color);
				colorArray.push(stroke11.color);
				colorArray.push(stroke12.color);
				colorArray.push(stroke13.color);
				
				rotationArray = new ArrayCollection();
				for (var j:uint = 0; j < 45; j++){
					rotationArray.addItem({angle:j});
				}
				
			}
			
			
			public function display():void {
				var endCounter:uint = 0;
				do {
					endCounter++;
				}while ((usedArray[endCounter] != false)&&(endCounter < maxNumOfVars));
				if (endCounter != maxNumOfVars){
					usedArray[endCounter] = true;
					currentlySearching = endCounter;
				legendArray.addItem({name:searchTitle.text,curSearch:endCounter,usedIndex:endCounter,colorc:colorArray[endCounter-1]});
				legendList.dataProvider = legendArray;
				var text:String = searchText.text.toString();
				var termArray:Array = new Array();
				if (text != ""){
					if (text.indexOf("\n") != -1){
						do {
							termArray.push(text.substring(0,text.indexOf("\n")));
							text = text.substring(text.indexOf("\n")+1,text.length);	
						}while (text.indexOf("\n") != -1);
					}
					termArray.push(text);
				}
				var andorchoice:String = andorgroup.selectedValue.toString();
				if (datetype == "Year"){
					var query:String = "select "+datecolumn+" AS year, count(*) as frequency from "+tablename+" where";
					for (var i:uint = 0; i < termArray.length; i++){
						if (i == termArray.length-1){
							query = query + " "+searchcolumn+" like '%"+termArray[i]+"%'";
						}
						else {
							query = query + " "+searchcolumn+" like '%"+termArray[i]+"%' "+andorchoice+" ";
						}
					}
					query = query + " group by year order by count(*) desc";
					s1 = query;
					s2 = databasename;
					s3 = serveraddress;
					s4 = serveruser;
					s5 = serverpass;
					searchDatabase.send();
				}
				else if (datetype == "Month"){
					var query:String = "select "+datecolumn+" AS month, year AS year, count(*) as frequency from "+tablename+" where";
					for (var i:uint = 0; i < termArray.length; i++){
						if (i == termArray.length-1){
							query = query + " "+searchcolumn+" like '%"+termArray[i]+"%'";
						}
						else {
							query = query + " "+searchcolumn+" like '%"+termArray[i]+"%' "+andorchoice+" ";
						}
					}
					query = query + " group by month, year order by count(*) desc";
					s1 = query;
					s2 = databasename;
					s3 = serveraddress;
					s4 = serveruser;
					s5 = serverpass;
					searchDatabase2.send();
				}
			
				}
			}
			public function setVal(p:uint,curSearch:uint,val:uint):void {
				if (curSearch == 1){
					displayArray[p].val1 = val;
				}
				else if (curSearch == 2){
					displayArray[p].val2 = val;
				}
				else if (curSearch == 3){
					displayArray[p].val3 = val;
				}
				else if (curSearch == 4){
					displayArray[p].val4 = val;
				}
				else if (curSearch == 5){
					displayArray[p].val5 = val;
				}
				else if (curSearch == 6){
					displayArray[p].val6 = val;
				}
				else if (curSearch == 7){
					displayArray[p].val7 = val;
				}
				else if (curSearch == 8){
					displayArray[p].val8 = val;
				}
				else if (curSearch == 9){
					displayArray[p].val9 = val;
				}
				else if (curSearch == 10){
					displayArray[p].val10 = val;
				}
				else if (curSearch == 11){
					displayArray[p].val11 = val;
				}
				else if (curSearch == 12){
					displayArray[p].val12 = val;
				}
				else if (curSearch == 13){
					displayArray[p].val13 = val;
				}
			}
			public function addBlankYear(year:uint):void {
				displayArray.addItem({year:year,val1:0,val2:0,val3:0,val4:0,
					val5:0,val6:0,val7:0,val8:0,
					val9:0,val10:0,val11:0,val12:0,val13:0});
			}
			public function addBlankYearMonth(year:uint,month:String,monthVal:uint):void {
				displayArray.addItem({monthyear:month+"-"+year.toString(),year:year,month:month,monthVal:monthVal,yearmonth:year.toString()+month,val1:0,val2:0,val3:0,val4:0,
					val5:0,val6:0,val7:0,val8:0,
					val9:0,val10:0,val11:0,val12:0,val13:0});
			}
			public function afterSearchDatabase(ev:ResultEvent):void {
			linechart.seriesFilters = [];
			var i:uint = 0;
			areachart.seriesFilters = [];
				freqArray = new ArrayCollection();
				if (ev.result != null){
					try{
						if (datetype == "Year"){
							a1.categoryField = "year";
							a2.categoryField = "year";
							freqArray = ev.result[0].lists.list;
							var dataSortField:SortField = new SortField();
							dataSortField.name = "year";
							dataSortField.numeric = true;
							var numericDataSort:Sort = new Sort();
							numericDataSort.fields = [dataSortField];
							freqArray.sort = numericDataSort;
							freqArray.refresh();
							var p:uint = 0;
							var lastYear:uint = 0;
							var proc:Boolean = false;
							for (i = 0; i < freqArray.length; i++){
								if ((freqArray[i].year != 0)&&(freqArray[i].year < 2011)){
									if (lastYear == 0){
										lastYear = freqArray[i].year;
									}
									else {
										if (freqArray[i].year > lastYear+1){
											do {
												lastYear++;
												proc = false;
												for (p = 0; p < displayArray.length; p++){
													if (displayArray[p].year == lastYear){
														setVal(p,currentlySearching,0);	
														proc = true;
													}
												}
												if (proc == false){
													addBlankYear(lastYear);
												}	
											}while (freqArray[i].year > lastYear+1);
										}
										proc = false;
										for (p = 0; p < displayArray.length; p++){
											if (displayArray[p].year == freqArray[i].year){
												setVal(p,currentlySearching,freqArray[i].frequency);
												proc = true;
											}
										}
										if (proc == false){
											addBlankYear(freqArray[i].year);
											setVal(displayArray.length-1,currentlySearching,freqArray[i].frequency);
										}	
										lastYear = freqArray[i].year;
									}
								}
							}
							var dataSortField:SortField = new SortField();
							dataSortField.name = "year";
							dataSortField.numeric = true;
							var numericDataSort:Sort = new Sort();
							numericDataSort.fields = [dataSortField];
							displayArray.sort = numericDataSort;
							displayArray.refresh();
						}
						else if (datetype == "Month"){
							a1.categoryField = "yearmonth";
							a2.categoryField = "yearmonth";
							freqArray = new ArrayCollection();
							var tempfreqArray:ArrayCollection = new ArrayCollection();
							tempfreqArray = ev.result[0].lists.list;
							var dataSortField:SortField = new SortField();
							dataSortField.name = "year";
							dataSortField.numeric = true;
							var numericDataSort:Sort = new Sort();
							numericDataSort.fields = [dataSortField];
							tempfreqArray.sort = numericDataSort;
							tempfreqArray.refresh();
							
							for (i = 2009; i < 2011; i++){
								freqArray.addItem({year:i,monthVal:1,month:"jan",frequency:0});
								freqArray.addItem({year:i,monthVal:2,month:"feb",frequency:0});
								freqArray.addItem({year:i,monthVal:3,month:"mar",frequency:0});
								freqArray.addItem({year:i,monthVal:4,month:"apr",frequency:0});
								freqArray.addItem({year:i,monthVal:5,month:"may",frequency:0});
								freqArray.addItem({year:i,monthVal:6,month:"jun",frequency:0});
								freqArray.addItem({year:i,monthVal:7,month:"jul",frequency:0});
								freqArray.addItem({year:i,monthVal:8,month:"aug",frequency:0});
								freqArray.addItem({year:i,monthVal:9,month:"sept",frequency:0});
								freqArray.addItem({year:i,monthVal:10,month:"oct",frequency:0});
								freqArray.addItem({year:i,monthVal:11,month:"nov",frequency:0});
								freqArray.addItem({year:i,monthVal:12,month:"dec",frequency:0});
							}
							for (i = 0; i < freqArray.length; i++){
								//trace (freqArray[i].year.toString() + ", " + freqArray[i].month);
							}
							for (i = 0; i < tempfreqArray.length; i++){
								for (var j:uint = 0; j < freqArray.length; j++){
									if ((freqArray[j].month == tempfreqArray[i].month)&&
										(freqArray[j].year == tempfreqArray[i].year)){
										freqArray[j].frequency = tempfreqArray[i].frequency
										//trace (freqArray[j].year.toString() + ", " + freqArray[j].month+ ", " + freqArray[j].frequency);
									}
								}
							}
							
							var dataSortField4:SortField = new SortField();
							dataSortField4.name = "year";
							dataSortField4.numeric = true;
							var dataSortField2:SortField = new SortField();
							dataSortField2.name = "monthVal";
							dataSortField2.numeric = true;
							dataSortField2.descending = false;
							var numericDataSort2:Sort = new Sort();
							numericDataSort2.fields = [dataSortField4,dataSortField2];
							freqArray.sort = numericDataSort2;
							freqArray.refresh();
						
							proc = false;
							for (i = 0; i < freqArray.length; i++){
							for (p = 0; p < displayArray.length; p++){
								if ((displayArray[p].year == freqArray[i].year)&&
									(displayArray[p].month == freqArray[i].month)){
									setVal(p,currentlySearching,freqArray[i].frequency);
									proc = true;
								}
							}
							if (proc == false){
								addBlankYearMonth(freqArray[i].year,freqArray[i].month,freqArray[i].monthVal);
								setVal(displayArray.length-1,currentlySearching,freqArray[i].frequency);
							}	
							}
							var dataSortField4:SortField = new SortField();
							dataSortField4.name = "year";
							dataSortField4.numeric = true;
							var dataSortField2:SortField = new SortField();
							dataSortField2.name = "monthVal";
							dataSortField2.numeric = true;
							dataSortField2.descending = false;
							var numericDataSort2:Sort = new Sort();
							numericDataSort2.fields = [dataSortField4,dataSortField2];
							displayArray.sort = numericDataSort2;
							displayArray.refresh();
							
							for (i = 0; i < displayArray.length; i++){
								trace (displayArray[i].year.toString() + ", " + displayArray[i].month+ ", " + 
									displayArray[i].frequency);
							}
						}
						
					}
					catch(e:Error){
						var stop98:String = "";
					}
				}
				
				linechart.dataProvider = displayArray;
				areachart.dataProvider = displayArray;
			/*	am1.dataProvider = displayArray;
				am2.dataProvider = displayArray;
				chartsa.dataProvider = displayArray;
				chartsbc.dataProvider = displayArray;*/
			}
			protected function button_clickHandler():void
			{
				getDatalist.send();
				currentState='exsisting';
			}
			
			protected function button_clickHandler_1():void
			{
				currentState='sqlconnect';
			}
			
			
			protected function button_clickHandler_2():void
			{
				currentState='csv';
			}
			
			
			protected function button_clickHandler_3():void
			{
				currentState='intro';
			}
			public function insertDataSet():void {
				serveraddress = t1.text;
				serveruser = t2.text;
				serverpass = t3.text;
				databasename = t4.text;
				tablename = t5.text;
				searchcolumn = t6.text;
				datecolumn = t7.text;
				datasetname = t8.text;
				datetype = dateRadioGroup.selectedValue.toString();
				
				s1 = t1.text;
				s2 = t2.text;
				s3 = t3.text;
				s4 = t4.text;
				s5 = t5.text;
				s6 = t6.text;
				s7 = t7.text;
				s8 = dateRadioGroup.selectedValue.toString();
				s9 = t8.text;
				insertDataset.send();
			
				
			}
			public function afterInsert(ev:ResultEvent):void {
				var stop:String = "";
				this.currentState = 'viz';
			}
			public function afterGetDatalist(ev:ResultEvent):void {
				var stop:String = "";
				preArray = new ArrayCollection();
				preArray = ev.result[0].lists.list;
			}
			public function loaddatasource():void {
				
				redoUsedArray();
				if (exsistlist.selectedIndex != -1){
					serveraddress = exsistlist.selectedItem.serveraddress;
					serveruser = exsistlist.selectedItem.username;
					serverpass = exsistlist.selectedItem.userpassword;
					databasename = exsistlist.selectedItem.databasename;
					tablename = exsistlist.selectedItem.tablename;
					searchcolumn = exsistlist.selectedItem.columntosearch;
					datecolumn = exsistlist.selectedItem.datecolumn;
					datasetname = exsistlist.selectedItem.name;
					datetype = exsistlist.selectedItem.datetype;
					this.currentState = 'viz';
					eraseAll();
				}
			
			}
			public function deleteSearch():void {
				if (legendList.selectedIndex != -1){
					var i:uint = 0;
					for (i = 0; i < displayArray.length; i++){
						setVal(i,legendArray[legendList.selectedIndex].curSearch,0);
					}
					usedArray[legendArray[legendList.selectedIndex].usedIndex] = false;
					legendArray.removeItemAt(legendList.selectedIndex);
					legendList.dataProvider = legendArray;
					if (datetype == "Year"){

					var dataSortField:SortField = new SortField();
					dataSortField.name = "year";
					dataSortField.numeric = true;
					var numericDataSort:Sort = new Sort();
					numericDataSort.fields = [dataSortField];
					displayArray.sort = numericDataSort;
					displayArray.refresh();
					}
					else if (datetype == "Month"){
						var dataSortField4:SortField = new SortField();
						dataSortField4.name = "year";
						dataSortField4.numeric = true;
						var dataSortField2:SortField = new SortField();
						dataSortField2.name = "monthVal";
						dataSortField2.numeric = true;
						dataSortField2.descending = false;
						var numericDataSort2:Sort = new Sort();
						numericDataSort2.fields = [dataSortField4,dataSortField2];
						displayArray.sort = numericDataSort2;
						displayArray.refresh();
					}
					linechart.dataProvider = displayArray;
					areachart.dataProvider = displayArray;
				/*	chartsa.dataProvider = displayArray;
					am1.dataProvider = displayArray;
					am2.dataProvider = displayArray;
					chartsbc.dataProvider = displayArray;*/
				}	
			}
			public function eraseAll():void {
				displayArray = new ArrayCollection();
				legendArray = new ArrayCollection();
				searchTitle.text = "";
				searchText.text = "";
				legendList.dataProvider = legendArray;
				var dataSortField:SortField = new SortField();
				dataSortField.name = "year";
				dataSortField.numeric = true;
				var numericDataSort:Sort = new Sort();
				numericDataSort.fields = [dataSortField];
				displayArray.sort = numericDataSort;
				displayArray.refresh();
				linechart.dataProvider = displayArray;
				areachart.dataProvider = displayArray;
				/*chartsa.dataProvider = displayArray;
				am1.dataProvider = displayArray;
				am2.dataProvider = displayArray;
				chartsbc.dataProvider = displayArray;*/
			}
			private function myKeyUpHandler(event:KeyboardEvent):void
			{
				var keycode_c:uint = 67;
				if (event.ctrlKey && event.keyCode == keycode_c)
				{
					// Separator used between Strings sent to clipboard
					// to separate selected cells.
					var separator:String = ",";
					// The String sent to the clipboard
					var dataString:String = "";
					
					// Loop over the selectedCells property.
					// Data in selectedCells is ordered so that 
					// the last selected cell is at the head of the list.
					// Process the data in reverse so
					// that it appears in the correct order in the clipboard.
					var n:int = event.currentTarget.selectedCells.length;
					for (var i:int = 0; i < n; i++)
					{
						var cell:Object = event.currentTarget.selectedCells[i];
						
						// Get the row for the selected cell.
						var data:Object = 
							event.currentTarget.dataProvider[cell.rowIndex];
						
						// Get the name of the field for the selected cell.
						var dataField:String = 
							event.currentTarget.columns[cell.columnIndex].dataField;
						
						// Get the cell data using the field name.
						dataString = data[dataField] + separator + dataString;
					}
					
					// Remove trailing separator.
					dataString = 
						dataString.substr(0, dataString.length - separator.length);
					
					// Write dataString to the clipboard.
					System.setClipboard(dataString);
				}
			}
			private function handleCopyClick():void
			{
				System.setClipboard( leftDataGrid.getTextFromItems() );
			}
		]]>
		
	</fx:Script>
	<fx:Declarations>
		<s:HTTPService id = "searchDatabase"
					   result="afterSearchDatabase(event);"   resultFormat="array"
					   url = "http://localhost:8888/FrequencyGrapher5/php/frequencyGrapher/searchDataset.php"
					   method="POST" >
			<s:request xmlns="">
				<s1>{s1}</s1>
				<s2>{s2}</s2>
			</s:request>
		</s:HTTPService>
		<s:HTTPService id = "searchDatabase2"
					   result="afterSearchDatabase(event);"   resultFormat="array"
					   url = "http://localhost:8888/FrequencyGrapher5/php/frequencyGrapher/searchDataset2.php"
					   method="POST" >
			<s:request xmlns="">
				<s1>{s1}</s1>
				<s2>{s2}</s2>
			</s:request>
		</s:HTTPService>
		<s:HTTPService id = "insertDataset"
					   result="afterInsert(event);"  
					   url = "http://localhost:8888/FrequencyGrapher5/php/frequencyGrapher/insertDataItem.php"
					   method="POST" >
			<s:request xmlns="">
				<s1>{s1}</s1>
				<s2>{s2}</s2>
				<s3>{s3}</s3>
				<s4>{s4}</s4>
				<s5>{s5}</s5>
				<s6>{s6}</s6>
				<s7>{s7}</s7>
				<s8>{s8}</s8>
				<s9>{s9}</s9>
			</s:request>
		</s:HTTPService>
		<s:HTTPService id = "getDatalist"
					   result="afterGetDatalist(event);"   resultFormat="array"
					   url = "http://localhost:8888/FrequencyGrapher5/php/frequencyGrapher/getDataList.php"
					   method="GET" >
		</s:HTTPService>
		<s:RadioButtonGroup id="radiogroup2"/>
		<s:RadioButtonGroup id="andorgroup"/>
		<s:RadioButtonGroup id="dateRadioGroup"/>
	</fx:Declarations>
	<s:states>
		<s:State name="intro"/>
		<s:State name="exsisting"/>
		<s:State name="sqlconnect"/>
		<s:State name="csv"/>
		<s:State name="viz"/>
	</s:states>
	<s:layout.intro>
		<s:BasicLayout/>
	</s:layout.intro>
		<s:BorderContainer width="1024" height="768" backgroundAlpha="0"
						   top="0" horizontalCenter="0">
			<graphics:Graphic1 includeIn="csv,exsisting,intro,sqlconnect" x="183" y="146"/>
			<s:RichText includeIn="csv,exsisting,intro,sqlconnect" x="219" y="165" color="#333333"
						fontFamily="Myriad Pro" fontSize="51"
						tabStops="S0 S50 S100 S150 S200 S250 S300 S350 S400 S450 S500 S550"
						text="What would you like to do?"
						text.csv="Upload A File"
						text.exsisting="Which Source?"
						text.sqlconnect="Please Enter the SQL Info"/>
			<s:Button x="342" y="242" width="332.006" label="Load Exsisting Source" buttonMode="true"
					  click="button_clickHandler()" skinClass="components.btn"
					  visible.csv="false"
					  visible.exsisting="false"
					  visible.sqlconnect="false"
					  visible.viz="false"/>
			<s:Button x="342" y="281" width="332.006" label="Load MySql Database" buttonMode="true"
					  click="button_clickHandler_1()" skinClass="components.btn"
					  visible.csv="false"
					  visible.exsisting="false"
					  visible.sqlconnect="false"
					  visible.viz="false"/>
			<s:Button x="342" y="320" width="332.006" label="Load CSV File" buttonMode="true"
					  click="button_clickHandler_2()" skinClass="components.btn"
					  visible.csv="false"
					  visible.exsisting="false"
					  visible.sqlconnect="false"
					  visible.viz="false"/>
			<s:TextInput id="t1" includeIn="sqlconnect" x="499" y="234" text="localhost"/>
			<s:RichText includeIn="sqlconnect" x="277" y="237" width="215" height="17" color="#333333"
						fontFamily="Myriad Pro" fontSize="17" tabStops="S0 S50 S100"
						text="Server Address" textAlign="end"/>
			<s:TextInput id="t2" includeIn="sqlconnect" x="499" y="260" text="root"/>
			<s:RichText includeIn="sqlconnect" x="277" y="263" width="215" height="17" color="#333333"
						fontFamily="Myriad Pro" fontSize="17" tabStops="S0 S50 S100"
						text="User Name" textAlign="end"/>
			<s:TextInput id="t3" includeIn="sqlconnect" x="499" y="286" text=""/>
			<s:RichText includeIn="sqlconnect" x="277" y="289" width="215" height="17" color="#333333"
						fontFamily="Myriad Pro" fontSize="17" tabStops="S0 S50 S100" text="User Password"
						textAlign="end"/>
			<s:TextInput id="t4" includeIn="sqlconnect" x="499" y="312" text=""/>
			<s:RichText includeIn="sqlconnect" x="277" y="315" width="215" height="17" color="#333333"
						fontFamily="Myriad Pro" fontSize="17" tabStops="S0 S50 S100"
						text="Database Name" textAlign="end"/>
			<s:TextInput id="t5" includeIn="sqlconnect" x="499" y="338" text=""/>
			<s:RichText includeIn="sqlconnect" x="277" y="341" width="215" height="17" color="#333333"
						fontFamily="Myriad Pro" fontSize="17" tabStops="S0 S50 S100" text="Table Name"
						textAlign="end"/>
			<s:TextInput id="t6" includeIn="sqlconnect" x="499" y="364" text=""/>
			<s:RichText includeIn="sqlconnect" x="277" y="367" width="215" height="17" color="#333333"
						fontFamily="Myriad Pro" fontSize="17" tabStops="S0 S50 S100" text="Column to Search"
						textAlign="end"/>
			<s:TextInput id="t7" includeIn="sqlconnect" x="499" y="391" text=""/>
			<s:RichText includeIn="sqlconnect" x="277" y="394" width="215" height="17" color="#333333"
						fontFamily="Myriad Pro" fontSize="17" tabStops="S0 S50 S100"
						text="Date Column" textAlign="end"/>
			<s:TextInput id="t8" includeIn="sqlconnect" x="499" y="417"/>
			<s:RichText includeIn="sqlconnect" x="277" y="420" width="215" height="17" color="#333333"
						fontFamily="Myriad Pro" fontSize="17" tabStops="S0 S50 S100" text="Name This Data Connection"
						textAlign="end"/>
			<s:RadioButton includeIn="sqlconnect" x="639" y="393" label="Month" groupName="dateRadioGroup"
						   selected="false"/>
			<s:RadioButton includeIn="sqlconnect" x="698" y="393" label="Year" groupName="dateRadioGroup"
						   selected="true"/>
			<s:Button includeIn="sqlconnect" x="556" y="453" label="Proceed" click="insertDataSet();"/>
			<mx:Canvas id="graphCont" visible="false" backgroundAlpha="0.0" verticalScrollPolicy="on"
							   visible.viz="true" left="0" top="0"  height="768"
							   width="755">
			<s:BorderContainer width="100%" height="100%" id="gridCont" visible="{grid.selected}"	>
				<components:CopyPasteDataGrid  width="100%" height="100%"  allowMultipleSelection="true"
									 keyUp="myKeyUpHandler(event);" id="leftDataGrid"
									 dataProvider="{displayArray}" >
					
				</components:CopyPasteDataGrid >
			</s:BorderContainer>
		
			<mx:LineChart id="linechart" visible="{lc.selected}" fontFamily="{fstyle.selectedItem}"
						  color="0x323232" dataProvider="{displayArray}" fontSize="{Number(fsize.selectedItem)}"
						  showAllDataTips="false" showDataTips="true"
							width="100%" height="100%">
				<mx:horizontalAxis>
					<mx:CategoryAxis title="Year" id="a1" ticksBetweenLabels="false"  categoryField="year"/>
				</mx:horizontalAxis>
				<mx:horizontalAxisRenderers>
					<mx:AxisRenderer labelRotation="{lrotation.selectedItem.angle}" axis="{a1}"/>
				</mx:horizontalAxisRenderers>
				<mx:verticalAxis>
					<mx:LinearAxis
						title="Frequency" id="b1"/>
				</mx:verticalAxis>
				
				<mx:verticalAxisRenderers>
					<mx:AxisRenderer labelRotation="180" axis="{b1}"/>
				</mx:verticalAxisRenderers>
				<mx:series>
					<mx:LineSeries yField="val1" id="vvar1"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val2" id="vvar2" form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val3" id="vvar3"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val4" id="vvar4"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val5" id="vvar5"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val6" id="vvar6"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val7" id="vvar7"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val8" id="vvar8"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val9" id="vvar9"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val10" id="vvar10"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val11" id="vvar11"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val12" id="vvar12"  form="{dropy.selectedItem}" displayName="name"/>
					<mx:LineSeries yField="val13" id="vvar13"  form="{dropy.selectedItem}" displayName="name"/>
				</mx:series>
			</mx:LineChart>
			<mx:AreaChart id="areachart" width="100%"  height="100%" visible="{ac.selected}"  
						  color="0x323232" fontFamily="{fstyle.selectedItem}" fontSize="{Number(fsize.selectedItem)}"
						  dataProvider="{displayArray}" showAllDataTips="false" showDataTips="true">
				
				<mx:horizontalAxis>
					<mx:CategoryAxis  title="Year" id = "a2" ticksBetweenLabels="false" categoryField="year"/>
				</mx:horizontalAxis>
				
				<mx:horizontalAxisRenderers>
					<mx:AxisRenderer labelRotation="{lrotation.selectedItem.angle}" axis="{a2}"/>
				</mx:horizontalAxisRenderers>
				
				<mx:verticalAxis>
					<mx:LinearAxis
						title="Frequency" id="b2"/>
				</mx:verticalAxis>
				
				<mx:verticalAxisRenderers>
					<mx:AxisRenderer labelRotation="180" axis="{b2}"/>
				</mx:verticalAxisRenderers>
				
				<mx:series>
					<mx:AreaSeries yField="val1"   form="{dropy.selectedItem}" displayName="val1"/>
					<mx:AreaSeries yField="val2"  form="{dropy.selectedItem}" displayName="val2"/>
					<mx:AreaSeries yField="val3"  form="{dropy.selectedItem}" displayName="val3"/>
					<mx:AreaSeries yField="val4"  form="{dropy.selectedItem}" displayName="val4"/>
					<mx:AreaSeries yField="val5"  form="{dropy.selectedItem}" displayName="val5"/>
					<mx:AreaSeries yField="val6"  form="{dropy.selectedItem}" displayName="val6"/>
					<mx:AreaSeries yField="val7"  form="{dropy.selectedItem}" displayName="val7"/>
					<mx:AreaSeries yField="val8"  form="{dropy.selectedItem}" displayName="val8"/>
					<mx:AreaSeries yField="val9"  form="{dropy.selectedItem}" displayName="val9"/>
					<mx:AreaSeries yField="val10"  form="{dropy.selectedItem}" displayName="val10"/>
					<mx:AreaSeries yField="val11"  form="{dropy.selectedItem}" displayName="val11"/>
					<mx:AreaSeries yField="val12"  form="{dropy.selectedItem}" displayName="val12"/>
					<mx:AreaSeries yField="val13"  form="{dropy.selectedItem}" displayName="val13"/>
				</mx:series>
			</mx:AreaChart>
			<!--s:BorderContainer id="ballonCont" width="100%" height="100%" visible="{am.selected}"   >
			<s:VGroup x="0" y="0" width="100%" height="100%">
				<amcharts:AmPieChart id = "am1"
				width="100%"
				height="50%"
				
				valueField="val1"
				titleField="year"
				angle="5"
				depth3D="0"
				innerRadius="10"
				groupPercent="3"
				gradient="radial"
				filters="{[shadow]}"
				startDuration="1.5"
				startRadius="100"
				marginLeft="0"
				marginRight="0"
				labelWidth="100">
				
				<amcharts:balloon>
					<amcharts:AmBalloon cornerRadius="10" borderThickness="2" borderColor="#FFFFFF" borderAlpha="1"/>                
				</amcharts:balloon>
				
			</amcharts:AmPieChart>
			
			<amcharts:AmSerialChart 
				width="100%" id = "am2"
				height="50%"
				marginTop="15"
				marginLeft="55"
				marginRight="15"
				marginBottom="80"
				
				categoryField="year"
				startDuration="1"
				angle="30"
				depth3D="0">
				<amcharts:categoryAxis>
					<amcharts:CategoryAxis gridCount="{displayArray.length}" labelRotation="90"/>
				</amcharts:categoryAxis>
				<amcharts:graphs>
					<amcharts:AmGraph balloonText="[[category]]: [[value]]" id="g0"
									  valueField="val1" type="column" lineAlpha="0" fillAlphas="[0.8]"/>                        
				</amcharts:graphs>
				<amcharts:balloon>
					<amcharts:AmBalloon cornerRadius="10" borderThickness="2" borderColor="#FFFFFF" borderAlpha="1"/>                
				</amcharts:balloon>    
				<amcharts:chartCursor>
					<amcharts:ChartCursor zoomable="false" cursorAlpha="0" categoryBalloonEnabled="false"/>                    
				</amcharts:chartCursor>    
			</amcharts:AmSerialChart>
			</s:VGroup>
			</s:BorderContainer>
				<s:BorderContainer id="sac" width="100%" height="100%" visible="{stac.selected}"   >
				  <s:HGroup contentBackgroundColor="#FFFFFF" width="100%" height="100%">
        <s:VGroup width="100%" height="100%">                
          
            <amcharts:AmSerialChart
                width="100%"
                height="100%"
                id="chartsa"
                marginTop="40"
                marginLeft="60"
                marginRight="20"
                marginBottom="20"
              
                categoryField="year"
                plotAreaFillAlphas="[0]">
                <amcharts:graphs>
                    <amcharts:AmGraph 
                        color="#FFFFFF" 
                        title="Sample a" 
                        valueField="val1" 
                        type="line" 
                        lineThickness="2"
                        lineAlpha="1" 
                        fillAlphas="[0.7]"
                        showBalloon="false"/>                        
                    <amcharts:AmGraph 
                        color="#FFFFFF" 
                        title="Sample b" 
                        valueField="val2" 
                        type="line" 
                        lineThickness="2"
                        lineAlpha="1" 
                        fillAlphas="[0.7]"/>
                    <amcharts:AmGraph 
                        color="#FFFFFF" 
                        title="Sample c" 
                        valueField="val3" 
                        type="line" 
                        lineThickness="2"
                        lineAlpha="1" 
                        fillAlphas="[0.7]"
                        showBalloon="false"/>
                    <amcharts:AmGraph 
                        color="#FFFFFF" 
                        title="Sample d" 
                        valueField="val4" 
                        type="line" 
                        lineThickness="2"
                        lineAlpha="1"
                        fillAlphas="[0.7]"/>
                </amcharts:graphs>
                
                <amcharts:valueAxes>
                    <amcharts:ValueAxis stackType="regular" gridAlpha="0.1"/>                    
                </amcharts:valueAxes>
                
                <amcharts:categoryAxis>
                    <amcharts:CategoryAxis gridAlpha="0.1" fontWeight="bold" startOnAxis="true" position="top"/>
                </amcharts:categoryAxis>
                
                <amcharts:chartScrollbar>
                    <amcharts:ChartScrollbar height="20"/>                    
                </amcharts:chartScrollbar>
                
                <amcharts:chartCursor>
                    <amcharts:ChartCursor/>                    
                </amcharts:chartCursor>
                
            </amcharts:AmSerialChart>
            
            
        </s:VGroup>
        
     
    </s:HGroup>
				</s:BorderContainer>
				<s:BorderContainer id="sbc" width="100%" height="100%" visible="{stbc.selected}"   >
				<s:HGroup contentBackgroundColor="#FFFFFF" width="100%" height="100%">
        <amcharts:AmSerialChart columnWidth="0.6"
                                rotate="true"
                                width="100%"
                                height="100%"
                                id="chartsbc"
                                marginTop="20"
                                marginRight="20"
                                marginLeft="60"
                                categoryField="year"
                                startDuration="1"
                                angle="30"
                                depth3D="0"
                                plotAreaFillColors="[0xFAFAFA]">
            <amcharts:graphs>
                <amcharts:AmGraph labelText="[[value]]" title="Europe" valueField="val1" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#C72C95"/>                        
                <amcharts:AmGraph labelText="[[value]]" title="North America" valueField="val2" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#D8E0BD"/>
                <amcharts:AmGraph labelText="[[value]]" title="Asia-Pacific" valueField="val3" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#B3DBD4"/>
                <amcharts:AmGraph labelText="[[value]]" title="Latin America" valueField="val4" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#69A55C"/>
                <amcharts:AmGraph labelText="[[value]]" title="Middle East" valueField="val5" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#B5B8D3"/>
                <amcharts:AmGraph labelText="[[value]]" title="Africa" valueField="val6" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#F4E23B"/>  
                <amcharts:AmGraph labelText="[[value]]" title="Europe" valueField="val7" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#C72C95"/>                        
                <amcharts:AmGraph labelText="[[value]]" title="North America" valueField="val8" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#D8E0BD"/>
                <amcharts:AmGraph labelText="[[value]]" title="Asia-Pacific" valueField="val9" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#B3DBD4"/>
                <amcharts:AmGraph labelText="[[value]]" title="Latin America" valueField="val10" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#69A55C"/>
                <amcharts:AmGraph labelText="[[value]]" title="Middle East" valueField="val11" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#B5B8D3"/>
                <amcharts:AmGraph labelText="[[value]]" title="Africa" valueField="val12" type="column" lineAlpha="0" fillAlphas="[1]" lineColor="#F4E23B"/>                                                                				
            </amcharts:graphs>
            
            <amcharts:valueAxes>
                <amcharts:ValueAxis stackType="regular" gridAlpha="0.1"/>                    
            </amcharts:valueAxes>
            
            <amcharts:categoryAxis>
                <amcharts:CategoryAxis gridAlpha="0.1"/>
            </amcharts:categoryAxis>
            
        </amcharts:AmSerialChart>
    </s:HGroup>
				</s:BorderContainer-->
				
	
			</mx:Canvas>
			<mx:Button label="Copy" click="handleCopyClick()"
					   x.viz="765" y.viz="-3"/>
			<s:RichText includeIn="viz" x="763" y="26" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="17" tabStops="S0 S50 S100" text="Create New Search"/>
			<s:TextInput id="searchTitle" includeIn="viz" x="845" y="46" text=""/>
			<s:RichText includeIn="viz" x="773" y="51" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="13" tabStops="S0 S50 S100" text="Search Title"/>
			<s:RichText includeIn="viz" x="896" y="248" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="13" tabStops="S0 S50 S100" text="Font Size"/>
			<s:TextArea id="searchText" includeIn="viz" x="845" y="73" width="167" height="132"
						 text=""/>
			<s:RichText includeIn="viz" x="772" y="76" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="13" tabStops="S0 S50 S100" whiteSpaceCollapse="preserve">
				<s:content><s:p><s:span>Serach Terms</s:span></s:p><s:p><s:span>Seperated by</s:span></s:p><s:p><s:span>Return</s:span></s:p></s:content>
			</s:RichText>
			<s:RadioButton includeIn="viz" x="795" y="126" label="and" groupName="andorgroup"/>
			<s:RadioButton includeIn="viz" x="797" y="153" selected="true" label="or" groupName="andorgroup"/>
			<s:Button includeIn="viz" x="763" y="184" click="display();" label="Display"/>
			<s:List id="legendList" includeIn="viz" x="766" y="227" labelField="name" dataProvider="{legendArray}"  width="119" height="261"
					skinClass="components.legendskin">
			</s:List>
			<s:RichText includeIn="viz" x="767" y="206" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="17" tabStops="S0 S50 S100" text="Legend"/>
			<s:RichText includeIn="viz" x="896" y="228" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="17" tabStops="S0 S50 S100" text="Style"/>
			<s:Button includeIn="viz" x="886" y="466" width="98" label="Delete Item"
					  click="deleteSearch();"/>
			<s:RichText includeIn="viz" x="892" y="385" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="17" tabStops="S0 S50 S100" text="View Settings"/>
			<s:RichText includeIn="viz" x="893" y="401" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="13" tabStops="S0 S50 S100" text="Line Format :"/>
			<s:DropDownList id="dropy" includeIn="viz" x="892" y="416" width="92">
				<mx:ArrayCollection>
					<fx:String>segment</fx:String>
					<fx:String>step</fx:String>
					<fx:String>vertical</fx:String>
					<fx:String>horizontal</fx:String>
					<fx:String>reverseStep</fx:String>
					<fx:String>curve</fx:String>
				</mx:ArrayCollection></s:DropDownList>
			<s:Button includeIn="viz" x="758" y="654" click="snap();" label="Save Graph As :"/>
			<s:TextInput id="saveurl" includeIn="viz" x="870" y="654" text="text.jpg"/>
			<s:RichText includeIn="csv,exsisting,intro,sqlconnect" x="15" y="13" color="#CCCCCC" fontFamily="Myriad Pro"
						fontSize="51"
						tabStops="S0 S50 S100 S150 S200 S250 S300 S350 S400 S450 S500 S550"
						text="Frequency Grapher V 2.0"/>
			<s:Button x="985" y="0" buttonMode="true" click="button_clickHandler_3()"
					  skinClass="components.homebtn"/>
			<s:VGroup includeIn="viz" x="765" y="499" width="167">
				<s:RadioButton id="lc" label="Line Chart" groupName="radiogroup2" selected="true"/>
				<s:RadioButton id="ac" label="Area Chart" groupName="radiogroup2" />
				<s:RadioButton id="am" label="Pie and Bar (displays search 1)" groupName="radiogroup2"/>
				<s:RadioButton id="stac" label="Stacked Area (displays 1-4 search)" groupName="radiogroup2"/>
				<s:RadioButton id="stbc" label="Stacked Bar (displays 1-6 search)" groupName="radiogroup2"/>
				<s:RadioButton id="grid" label="Excell Grid" groupName="radiogroup2"/>
			</s:VGroup>
			<s:List id="exsistlist" includeIn="exsisting" width="334" height="284"
					contentBackgroundAlpha="0.0" contentBackgroundColor="#000000"
					dataProvider="{preArray}" horizontalCenter="0" itemRenderer="dataitem"
					labelField="name" textAlign="center" verticalCenter="0"></s:List>
			<s:Button includeIn="exsisting" x="555" y="531" label="Load Data Source"
					  click="loaddatasource();"/>
			<s:DropDownList id="fsize" selectedIndex="1" includeIn="viz" x="893" y="266">
				<mx:ArrayCollection>
					<fx:String>12</fx:String>
					<fx:String>13</fx:String>
					<fx:String>14</fx:String>
					<fx:String>15</fx:String>
					<fx:String>16</fx:String>
					<fx:String>17</fx:String>
					<fx:String>18</fx:String>
					<fx:String>19</fx:String>
					<fx:String>20</fx:String>
					<fx:String>21</fx:String>
					<fx:String>22</fx:String>
				</mx:ArrayCollection>
			</s:DropDownList>
			<s:RichText includeIn="viz" x="896" y="295" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="13" tabStops="S0 S50 S100" text="Font Style"/>
			<s:DropDownList id="fstyle" includeIn="viz" x="893" y="313" selectedIndex="2">
				<mx:ArrayCollection>
					<fx:String>Georgia</fx:String>
					<fx:String>Verdana</fx:String>
					<fx:String>Myriad Pro</fx:String>
					<fx:String>Minion Pro</fx:String>
					<fx:String>Calibri</fx:String>
				</mx:ArrayCollection>
			</s:DropDownList>
			<s:RichText includeIn="viz" x="896" y="339" color="#FFFFFF" fontFamily="Myriad Pro"
						fontSize="13" tabStops="S0 S50 S100" text="Label Rotation"/>
			<s:DropDownList id="lrotation" dataProvider="{rotationArray}" labelField="angle"
							includeIn="viz" x="893" y="357" selectedIndex="40">
				
			</s:DropDownList>
		</s:BorderContainer>
</s:Application>
