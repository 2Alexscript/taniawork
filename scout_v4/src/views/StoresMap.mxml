<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:mx="library://ns.adobe.com/flex/mx"
		xmlns:s="library://ns.adobe.com/flex/spark"
		xmlns:controls="com.flexcapacitor.controls.*"
		xmlns:components="components.*"
		xmlns:cs="cs.*"
		menuKeyPressed="navigator.popView()"
		backKeyPressed="navigator.popView()"
		backgroundColor="#FFFFFF"
		backgroundAlpha="1"  
		title="Map"
		viewActivate="onViewActivate();">
	<s:navigationContent>
		<s:Image x="0" y="-2" click="navigator.popView();"
				 >
			<s:source>
				<s:MultiDPIBitmapSource source160dpi="@Embed('assets/backbtn_Low.png')"
										source240dpi="@Embed('assets/backbtn_Med.png')"
										source320dpi="@Embed('assets/backbtn_High.png')"
										source480dpi="@Embed('assets/backbtn_Higher.png')"
										source640dpi="@Embed('assets/backbtn_Highest.png')"/>
			</s:source>
		</s:Image>
	</s:navigationContent>
	<fx:Script source="../func/globalFunctions.as"/>

	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.rpc.events.ResultEvent;
			import spark.events.ViewNavigatorEvent;
			
			[Bindable]
			public var listData:ArrayCollection = new ArrayCollection();
			private function onViewActivate():void {
				getLocations.send();
			}
			
			
			public function afterGetLocations(event:ResultEvent):void
			{
				listData = new ArrayCollection();
				try{			
					listData = event.result[0].ress.res;		
				}
				catch(e:Error){
					try{
						
						listData.addItem(event.result[0].ress.res);
					}
					catch(e:Error){
					}
				}
				
				//add show locations here	
			}
			private function onViewDeactivate():void {
			
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<s:HTTPService id="getLocations" method="GET" resultFormat="array"
					   url="http://www.scoutcard.ca/php/mobile_v2/getLocations.php"
					   result="afterGetLocations(event)" >
			<s:request xmlns="">
				<mylat>{data.mylat}</mylat>		
				<mylong>{data.mylong}</mylong>		
			</s:request>
		</s:HTTPService>
	</fx:Declarations>
	<mx:UIComponent id="uic" width="100%" height="100%" x="0" y="0"/>
</s:View>