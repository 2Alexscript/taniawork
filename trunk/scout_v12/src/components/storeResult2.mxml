<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
				xmlns:s="library://ns.adobe.com/flex/spark"
				creationComplete="init()" 
				autoDrawBackground="false"
				cacheAsBitmap="true"
				mouseOver="gOver();"
				mouseOut="gOut();" 
				mouseUp="gOut();" 
				mouseDown="gDown();" >
	<fx:Script>
		<![CDATA[
			import spark.components.Group;
			import spark.components.Label;
			import spark.components.VGroup;
			import spark.core.ContentCache;
			import spark.primitives.BitmapImage;
			protected var nw:Number = 300;
			static public const s_imageCache:ContentCache = new ContentCache();
			protected function init():void
			{
				
				var _runtimeDPI:int;
				if(Capabilities.screenDPI < 200){
					_runtimeDPI = 160;
				}
				else if(Capabilities.screenDPI >=200 && Capabilities.screenDPI <= 240){
					_runtimeDPI = 240
				}
				else if (Capabilities.screenDPI < 480){
					_runtimeDPI = 320;
				}
				else if (Capabilities.screenDPI < 640){
					_runtimeDPI = 480;
				}
				else if (Capabilities.screenDPI >=640){
					_runtimeDPI = 640;
				}
				
				
				nw = this.parent.width/2-(2/2);
				var g:Group = new Group();
				g.width = nw;
				g.height = nw;
				
				
				var b1:BitmapImage = new BitmapImage();
				b1.width = nw;
				b1.height = nw;
				b1.contentLoader = s_imageCache;
				b1.scaleMode = "zoom";
				b1.source = data.business_picture;
				
				var b2:BitmapImage = new BitmapImage();
				b2.width = nw;
				b2.height = nw;
				b2.contentLoader = s_imageCache;
				b2.scaleMode = "stretch";
				b2.bottom = 0;
				b2.source = "../assets/"+_runtimeDPI.toString()+"/gradient.png";
				
				var vg:VGroup = new VGroup;
				vg.height = nw;
				vg.width = nw;
				vg.paddingBottom = 10;
				vg.verticalAlign = "bottom";
				vg.horizontalAlign = "left";
				
				var l1:Label = new Label();
				l1.setStyle("paddingLeft",10);
				l1.setStyle("paddingRight",10);
				l1.maxDisplayedLines = 1;
				l1.setStyle("fontWeight","bold");
				l1.maxWidth = nw;
				l1.setStyle("color","#FFFFFF");
				l1.styleName = "textsize2";
				l1.text = data.business_name;
				
				var l2:Label = new Label();
				l2.setStyle("paddingLeft",10);
				l2.setStyle("paddingRight",10);
				l2.maxDisplayedLines = 1;
				l2.maxWidth = nw;
				l2.setStyle("color","#DDDDDD");
				l2.styleName = "textsize2";
				var dist:Number = data.distance;
				if (dist >= 1){
					l2.text = dist.toFixed(1)+ " km";
				}
				else {
					dist = dist * 1000;
					l2.text = dist.toFixed(0)+ " m";
				}
				
				vg.addElement(l1);
				vg.addElement(l2);
				g.addElement(b1);
				g.addElement(b2);
				g.addElement(vg);
				this.addElement(g);
			}
			public function gOver():void {
				this.alpha = 0.5;
			}
			public function gDown():void {
				this.alpha = 0.5;
			}
			public function gOut():void {
				this.alpha = 1;
			}
		]]>
	</fx:Script>
</s:ItemRenderer>