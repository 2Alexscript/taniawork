<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" dataChange="dataChange(event)"
		xmlns:s="library://ns.adobe.com/flex/spark" xmlns:d="dao.*" xmlns:u="utils.*" 
		xmlns:c="components.*"  activate="activ()"
		title="{data.id>0? 'List':'List'}">
	
	<fx:Script>
		<![CDATA[
			import events.ReportEvent;
			
			import flash.sensors.Geolocation;
			
			import model.Expense;
			
			import mx.core.FlexGlobals;
			import mx.events.FlexEvent;
			import mx.rpc.AsyncResponder;
			import mx.rpc.AsyncToken;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			import spark.transitions.CrossFadeViewTransition;
			
			[Bindable]
			protected var busy:Boolean = false;
			
			protected var locationDirty:Boolean = false;
			public function activ():void {
				
			}
			
		
			protected function geoUtil_locationUpdateHandler(event:Event):void
			{
				busy = false;
				locationDirty = false;
				data.location=geoUtil.location;
				data.longitude=geoUtil.longitude;
				data.latitude=geoUtil.latitude;
			}
			
			protected function gpsButton_clickHandler():void
			{
				busy = true;
				geoUtil.getLocation();
			}
			
		
			
			public function dataChange(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
			
				if (this.data != null){
					if (this.data.id != 0){
						var sotp:String = "";
						trace(this.data.id.toString());
					}
				
				}
			}
			
		]]>
	</fx:Script>
		
	<s:states>
		<s:State name="portrait"/>
		<s:State name="landscape"/>
	</s:states>
	
	<fx:Declarations>
		<d:ExpenseReportDAO id="srv"/>
		<s:DateTimeFormatter id="dtf" dateTimePattern="yyyy/MM/dd"/>
		<s:CurrencyFormatter id="cf" useCurrencySymbol="true"/>
		<u:GeolocationUtil id="geoUtil" locationUpdate="geoUtil_locationUpdateHandler(event)"/>
		<s:CrossFadeViewTransition id="transition" duration="0"/>
	</fx:Declarations>

	
	
	<s:VGroup paddingTop="20" paddingLeft="20" paddingBottom="20" paddingRight="20" width="100%" height="100%" gap="20">
		
		
	</s:VGroup>
	
	<s:BusyIndicator visible="{busy}" verticalCenter="0" horizontalCenter="0"/>
	
</s:View>
