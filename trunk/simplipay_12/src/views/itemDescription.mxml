<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:mx="library://ns.adobe.com/flex/mx" 
		xmlns:model="model.*"  
		viewActivate="view1_activateHandler(event)"
		menuKeyPressed="navigator.popToFirstView();" 
		backKeyPressed="navigator.popToFirstView();"
		xmlns:s="library://ns.adobe.com/flex/spark" 
		title="Store Detail">
	<s:navigationContent>
		<s:Button label="Back" click="navigator.popView();" fontSize="12"/> 
	</s:navigationContent>
	<s:actionContent>		
	</s:actionContent>
	<fx:Style>

		@namespace s "library://ns.adobe.com/flex/spark";
		
		@namespace mx "library://ns.adobe.com/flex/mx";
		
		s|Image {
			
			cornerRadius:50;
			
		}
		
	</fx:Style>
	<fx:Script>
		<![CDATA[
		
			import flash.geom.ColorTransform;
			import flash.sensors.Geolocation;
			
			
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			import mx.events.ResizeEvent;
			import mx.rpc.events.ResultEvent;
			
			import spark.components.supportClasses.StyleableTextField;
			import spark.events.IndexChangeEvent;
			import spark.events.ListEvent;
			import spark.events.ViewNavigatorEvent;
			
			[Bindable]
			public var actions:ArrayCollection;
			[Bindable]
			private var _data:Object;
			
			[Bindable]
			private var _addrString:String;
			
			[Bindable]
			private var _distString:String;
			
	
			
			[Embed("../assets/sms.png")]
			private var smsIcon:Class;
			
			[Embed("../assets/phone.png")]
			private var phoneIcon:Class;
			
			[Embed("../assets/mail.png")]
			private var mailIcon:Class;
			
			[Embed("../assets/map-marker.png")]
			private var mapIcon:Class;
			[Bindable]
			public var googleTravelUrl:String = "";
			import spark.filters.GlowFilter;
			public function profDown(ev:MouseEvent):void {
				var gl:spark.filters.GlowFilter = new GlowFilter(000000,1,5,5,5,1,true);
				ev.currentTarget.filters = [gl];
			}
			public function profUp(ev:MouseEvent):void {
				ev.currentTarget.filters = [];
				var s:String = "";
				
			}
		
			public function view1_activateHandler(event:Event):void
			{
				googleTravelUrl = "http://maps.google.com/maps?saddr="+data.mylat+","+data.mylong+"&daddr="+data.lat+","+data.long;	
			}
			private function onViewDeactivate():void {
				//hide the map's infowindow
				this.parentApplication.map.infoWindow.hide();
				this.parentApplication.disableTraffic();
			}
			public function tOver(ev:MouseEvent):void {
				ev.currentTarget.setStyle("textDecoration","underline");
			}
			public function tOut(ev:MouseEvent):void {
				ev.currentTarget.setStyle("textDecoration","none");
			}
			
		
			
		]]>
	</fx:Script>	
	
	<s:Image left="0" right="0" top="0" bottom="0" alpha="0.8" scaleMode="stretch"
			 source="assets/backdrop.png"/>
	<s:BorderContainer borderAlpha="0" visible="true" left="0" top="0" width="100%" height="100" backgroundAlpha="0">
				<s:Label id="selectedTitle" left="14" right="2" top="13" height="20" color="#000000"
						 fontSize="20" fontWeight="bold" text="{data.currentSelectedLocationName}" />
				<s:Label id="selectedAddress" left="13" right="5" top="39" height="20" color="#484848" mouseOver="tOver(event)" mouseOut="tOut(event)"
						 fontSize="14" fontWeight="bold" text="{data.address}" click="navigateToURL(new URLRequest(googleTravelUrl))"/>
				<s:Label id="selectedNumber" left="13" right="133" top="57" height="20" color="#484848"
						 fontSize="14" fontWeight="bold" text="{data.number}"/>
				<s:Label id="selectedWaitTime" right="10" top="60" width="103" height="20"
						 color="#000000" fontSize="20" fontWeight="bold"
						 text="{data.currentSelectedWaitTime}" textAlign="right"/>
	</s:BorderContainer>
	<s:Scroller  left="0" right="0" top="100" bottom="0" verticalScrollPolicy="on" horizontalScrollPolicy="off" >
		<s:VGroup left="2" right="2" top="0" bottom="0" gap="0" horizontalAlign="center">
			<s:BorderContainer width="306" height="249" cornerRadius="20" dropShadowVisible="true"
							   horizontalCenter="0" mouseDown="profDown(event)"
							   mouseUp="profUp(event)" verticalCenter="-7">
					<s:BitmapImage id="bmpImg" y="-1" left="-1" right="-1" height="110"
								   source="http://simplipay.ca/php/storeimages/{data.imagelarge}">
						<s:mask>
							<s:BorderContainer id="bmpMask"
											   cornerRadius="20"
											   width="{bmpImg.width}" height="110" />
						</s:mask>
					</s:BitmapImage>
				
				<s:BorderContainer top="25" width="50" cornerRadius="10" height="50" horizontalCenter="0"
								   borderAlpha="2" borderColor="#FFFFFF">
				<s:BitmapImage id="bmpImg2"  width="101%" height="101%" horizontalAlign="center" horizontalCenter="0" verticalCenter="0"
							   source="http://simplipay.ca/php/storeimages/{data.imagesmall}">
					<s:mask>
						<s:BorderContainer id="bmpMask2" 
										   cornerRadius="10"
										   width="{bmpImg2.width}" height="{bmpImg2.height}" />
					</s:mask>
				</s:BitmapImage>
				</s:BorderContainer>
				<s:BorderContainer height="123" width="90%" horizontalCenter="0" bottom="17" backgroundAlpha="0" borderAlpha="0">
					
						<s:VGroup width="100%" height="100%" gap="0">
							<s:HGroup width="100%" height="100%" gap="0">
								<s:Image x="188" y="37" width="40" height="40"
										 source="@Embed('assets/phone.png')"/>
								<s:Label width="238" height="40" color="#484848" fontSize="14"
										 text=" : {data.number}" verticalAlign="middle"/>
							</s:HGroup>
						
							<s:HGroup width="100%" height="100%" gap="0">
								<s:Image x="276" y="37" width="40" height="40"
										 source="@Embed('assets/mail.png')"/>
								<s:Label width="241" height="40" color="#484848" fontSize="14"
										 maxDisplayedLines="1" text=" : {data.email}"
										 verticalAlign="middle"/>
							</s:HGroup>
							<s:HGroup width="100%" height="100%" gap="0">
								<s:Image x="231" y="37" width="40" height="40"
										 
										 source="@Embed('assets/mappoint.png')"/>
								<s:Label width="263" height="40" maxWidth="200" color="#484848"
										 fontSize="14" maxDisplayedLines="1" text=" : {data.address}"
										 verticalAlign="middle"/>
							</s:HGroup>
						</s:VGroup>
					
				</s:BorderContainer>
			</s:BorderContainer>

		</s:VGroup>
	
	</s:Scroller>
</s:View>