<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:mx="library://ns.adobe.com/flex/mx"
		xmlns:s="library://ns.adobe.com/flex/spark"
		xmlns:components="components.*"
		menuKeyPressed="navigator.popView()"
		backKeyPressed="navigator.popView()"
		backgroundColor="#FFFFFF"
		title="Map"
		viewActivate="onViewActivate();">
	<s:navigationContent >
		<components:backbutton width="{this.width*0.15}" mouseEnabledWhereTransparent="true"
							   height="100%"   mouseDown="navigator.popView();"/>
	</s:navigationContent>
	<fx:Script source="../func/globalFunctions.as"/>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.rpc.events.ResultEvent;
			import spark.events.ViewNavigatorEvent;
			[Bindable]
			public var listData:ArrayCollection = new ArrayCollection();
			private function onViewActivate():void {
				getLocations.send();
			}
			public function afterGetLocations(event:ResultEvent):void
			{
				listData = new ArrayCollection();
				try{			
					listData = event.result[0].ress.res;		
				}
				catch(e:Error){
					try{
						listData.addItem(event.result[0].ress.res);
					}
					catch(e:Error){
					}
				}
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<s:HTTPService id="getLocations" method="GET" resultFormat="array"
					   url="http://www.scoutcard.ca/php/mobile_v2/getLocations.php"
					   result="afterGetLocations(event)" >
			<s:request xmlns="">
				<mylat>{data.mylat}</mylat>		
				<mylong>{data.mylong}</mylong>		
			</s:request>
		</s:HTTPService>
	</fx:Declarations>
	<mx:UIComponent id="uic" width="100%" height="100%" x="0" y="0"/>
</s:View>