<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
				xmlns:s="library://ns.adobe.com/flex/spark"
				autoDrawBackground="false" cacheAsBitmap="true"
				creationComplete="init()"
				dataChange="dchange()">
	<fx:Script source="../func/global.as"/>
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			private var _sectionField:String = "section";
			[Bindable]
			public var setheightval:Number = 640/(320/Capabilities.screenDPI);
			protected function init():void
			{
				dostuff();
			}
			public function dchange():void
			{
				dostuff();
			}
			public function dostuff():void {
				if (data.liked == 'yes'){
					specialheart.source = "assets/"+getDPIHeight().toString()+"/specialsheart.png";
				}
				else {
					specialheart.source = "assets/"+getDPIHeight().toString()+"/specialsheartoutline.png";
				}
				
				
				if ((data.picture == "None")||(data.picture == "")||
					(data.picture == null)||(data.picture == "null")){
					bmpImg.source = "assets/"+getDPIHeight().toString()+"/res_place_wide.png";
				}
				else {
					bmpImg.source = data.picture;
				}
				bmpImg.percentWidth = 100*data.type;
				bmpImg.height = this.width*(300/640)*data.type;
				bmpImg.contentLoader = s_imageCache;
				
				if (data.yearly == 'y'){
					dayval.text = data.startdate + " - " + data.enddate;
				}
				else {
					var tempweekstring:String = data.weekday;
					dayval.text = tempweekstring.substring(0,1).toUpperCase()+
						tempweekstring.substring(1,tempweekstring.length)+"s";
				}
			

			}
			
			public function heartclick(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				data.heartclick = 1;
				
				if (data.liked == 'yes'){
					data.liked = 'no';
					specialheart.source = "assets/"+getDPIHeight().toString()+"/specialsheartoutline.png";
				}
				else {
					data.liked = 'yes';
					specialheart.source = "assets/"+getDPIHeight().toString()+"/specialsheart.png";
				}
			}
			
		]]>
	</fx:Script>
	<s:VGroup width="100%"  top="-1"
			  gap="0"  height="{this.width*(300/640)*data.type-1}"
			  visible="{data.type == 1}">
		<s:Group width="{this.width}"  
				 mouseEnabled="false"   id="megacont" >
			<s:BitmapImage id="bmpImg"  top="0"  contentLoader="{s_imageCache}"
						   verticalCenter="0"  scaleMode="zoom" />
			<s:BitmapImage   top="0"  contentLoader="{s_imageCache}" width="{bmpImg.width}" height="{bmpImg.height}"
							 verticalCenter="0"  scaleMode="stretch" >
				<s:source>
					<s:MultiDPIBitmapSource source160dpi="@Embed('../assets/160/pictureshadow.png')"
											source240dpi="@Embed('../assets/240/pictureshadow.png')"
											source320dpi="@Embed('../assets/320/pictureshadow.png')"
											source480dpi="@Embed('../assets/480/pictureshadow.png')"
											source640dpi="@Embed('../assets/640/pictureshadow.png')"
											/>
				</s:source>
			</s:BitmapImage>
			<s:Group width="100" height="100" top="0" right="0" click="heartclick(event)">
				<s:BitmapImage   id="specialheart" top="30" right="30"  contentLoader="{s_imageCache}"
								 scaleMode="stretch"/>
			</s:Group>
			
			<s:VGroup    paddingLeft="{30/(320/Capabilities.screenDPI)}" width="100%"
						 paddingBottom="{20/(320/Capabilities.screenDPI)}"  
						 verticalAlign="bottom" bottom="0" gap="{10/(320/Capabilities.screenDPI)}"
						 paddingRight="{30/(320/Capabilities.screenDPI)}">
				<s:Group>
					<s:Rect width="100%"  height="100%" radiusX="5" radiusY="5">
						<s:fill>
							<s:SolidColor alpha="0.7" color="#36ccba"/>
						</s:fill>
					</s:Rect>
					<s:Label  color="#FFFFFF" 
							  paddingBottom="5" paddingLeft="10"
							  paddingRight="10" paddingTop="5" 
							  text="{data.value}"  fontWeight="bold"
							  horizontalCenter="0" verticalCenter="3"
							  styleName="textsize0" 
							  maxDisplayedLines="1"
							  verticalAlign="middle"></s:Label>
				</s:Group>
				
				
				<s:Label color="#FFFFFF" maxDisplayedLines="1"  paddingTop="{10/(320/Capabilities.screenDPI)}"
						 fontWeight="bold" styleName="textsize3"  paddingRight="{30/(320/Capabilities.screenDPI)}"
						 text="{data.name}"    width="{(setheightval-20)*data.type}"  maxWidth="{(setheightval-20)*data.type}"
						 verticalAlign="middle"></s:Label>
				
				<s:HGroup gap="10" verticalAlign="middle" horizontalAlign="left">
					<s:Label id="dayval"  color="#FFFFFF" 
							 styleName="textsize1" 
							 maxDisplayedLines="1"
							 verticalAlign="middle"></s:Label>

				</s:HGroup>
				
			</s:VGroup>
		
			<s:Line left="{30/(320/Capabilities.screenDPI)}" right="0"  bottom="0" > 
				<s:stroke><s:SolidColorStroke color="0xb2b2b2" weight="{1/(320/Capabilities.screenDPI)}"/></s:stroke>
			</s:Line>
			
		</s:Group>
	</s:VGroup>
	<s:Group width="{this.width}" visible="{data.type == 0}" top="-1" 
			 height="{65/(320/Capabilities.screenDPI)}">
		<s:Rect width="100%"  height="100%">
			<s:fill>
				<s:SolidColor alpha="1" color="#f2f2f2"/>
			</s:fill>
		</s:Rect>
		<s:Label width="100%" verticalCenter="2"
				 left="{30/(320/Capabilities.screenDPI)}" color="#4d4d4d" 
				 fontWeight="bold" styleName="textsize1" text="{data.name}"
				 verticalAlign="middle"></s:Label>
	</s:Group>
	<s:Line  width="100%"  bottom="1"  > 
		<s:stroke><s:SolidColorStroke color="0xcccccc" weight="{1/(320/Capabilities.screenDPI)}"/></s:stroke>
	</s:Line>
</s:ItemRenderer>