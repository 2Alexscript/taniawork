<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:components="components.*"
		backgroundColor="#f2f3f4"
		backKeyPressed="gobacktohome(event)"
		menuKeyPressed="menupress(event)"
		viewActivate="init(event)"
		title="Settings" >
	<s:navigationContent >
		<components:backbutton width="{this.width*0.15}" mouseEnabledWhereTransparent="true"
							   height="100%"   mouseDown="gobacktohome2();"/>
	</s:navigationContent>
	<s:actionContent></s:actionContent>
	<fx:Script source="../func/smallglobal.as"/>
	<fx:Script source="../func/global.as"/>
	<fx:Script>
		<![CDATA[
			import spark.events.ViewNavigatorEvent;
			[Bindable]
			public var busy:Boolean = false;
			public function logout():void {
				try{
					sqlConnection = new SQLConnection();
					sqlConnection.open(File.applicationStorageDirectory.resolvePath("localuser.db"));
					var stmt:SQLStatement = new SQLStatement();
					stmt.sqlConnection = sqlConnection;
					stmt.text = "delete from localuser";
					stmt.execute();
					email = "";
					nameGo = "";
					cityGo = "";
					this.parentApplication.logout();
				}
				catch(e:Error){
					email = "";
					nameGo = "";
					cityGo = "";
					this.parentApplication.logout();
				}
			}
			
			public function changePasswordClick(event:MouseEvent):void
			{
				navigator.pushView(Settings_ChangePwd);
			}
			
			public function changeProfClick(event:MouseEvent):void
			{
				navigator.pushView(Settings_ChangeProf);
			}
			
			public function init(event:ViewNavigatorEvent):void
			{
				navigator.activeView.mouseChildren = true;
				setLoginVars();		
			}
			public function gobacktohome(event:FlexEvent):void {
				event.preventDefault();
				gobacktohome2();
			}
			public function gobacktohome2():void {
				var slideTrans:SlideViewTransition = new SlideViewTransition();
				slideTrans.duration = slideduration;
				slideTrans.direction = ViewTransitionDirection.RIGHT;
				slideTrans.mode = SlideViewTransitionMode.UNCOVER;  //or COVER and PUSH modes
				navigator.pushView(Home, null,null,slideTrans);
			}
		]]>
	</fx:Script>
	<s:Scroller left="0" right="0" top="0" bottom="0"  verticalScrollPolicy="on" horizontalScrollPolicy="off" >
		<s:VGroup width="100%" paddingTop="{30/(320/Capabilities.screenDPI)}"
				  gap="{30/(320/Capabilities.screenDPI)}"  horizontalAlign="center" height="100%" >
			<s:Group width="100%" height="{150/(320/Capabilities.screenDPI)}"
					 mouseOver="gOver(event);"   
					 mouseOut="gOut(event);"  click="changeProfClick(event);"
					 mouseUp="gOut(event);" 
					 mouseDown="gDown(event);">
				<s:Rect width="100%" height="100%">
					<s:fill><s:SolidColor alpha="1" color="#FFFFFF"/></s:fill>
				</s:Rect>
				<s:Line  left="0" right="0"  bottom="0" > 
					<s:stroke><s:SolidColorStroke color="0xcfd3d7" 
												  weight="{1/(320/Capabilities.screenDPI)}"/></s:stroke>
				</s:Line>
				<components:next right="{20/(320/Capabilities.screenDPI)}" 
								 verticalCenter="0"/>
				<s:VGroup paddingLeft="{30/(320/Capabilities.screenDPI)}"
						  paddingTop="{30/(320/Capabilities.screenDPI)}"
						  gap="{30/(320/Capabilities.screenDPI)}" width="100%" height="100%" >
					<s:Label text="{nameGo}"
							 verticalCenter="0" verticalAlign="middle" 
							 textAlign="center"  mouseEnabled="false"
							 styleName="textsize1"  color="#474646"/>
					<s:Label text="{email}"
							 verticalCenter="0" verticalAlign="middle" 
							 textAlign="center"  mouseEnabled="false"
							 styleName="textsize1"  color="#474646"/>
					
				</s:VGroup>
			</s:Group>
			<s:Group width="100%" height="{100/(320/Capabilities.screenDPI)}"
					 mouseOver="gOver(event);"
					 mouseOut="gOut(event);" 
					 mouseUp="gOut(event);"  enabled="false"  alpha="0.5"
					 mouseDown="gDown(event);">
				<s:Rect width="100%" height="100%">
					<s:fill><s:SolidColor alpha="1" color="#FFFFFF"/></s:fill>
				</s:Rect>
				<s:Line  left="0" right="0"  bottom="0" > 
					<s:stroke><s:SolidColorStroke color="0xcfd3d7" weight="{1/(320/Capabilities.screenDPI)}"/></s:stroke>
				</s:Line>
				<components:next right="{20/(320/Capabilities.screenDPI)}" verticalCenter="0"/>
				<s:Label text="Passcode Lock"  left="{30/(320/Capabilities.screenDPI)}"
						 verticalCenter="0" verticalAlign="middle" 
						 textAlign="center"  mouseEnabled="false"
						 styleName="textsize1"  color="#474646"/>
			</s:Group>
			<s:Group width="100%" height="{100/(320/Capabilities.screenDPI)}"
					  click="changePasswordClick(event)"
					 mouseOver="gOver(event);"
					 mouseOut="gOut(event);" 
					 mouseUp="gOut(event);" 
					 mouseDown="gDown(event);">
				<s:Rect width="100%" height="100%">
					<s:fill><s:SolidColor alpha="1" color="#FFFFFF"/></s:fill>
				</s:Rect>
				<s:Line  left="0" right="0"  bottom="0" > 
					<s:stroke><s:SolidColorStroke color="0xcfd3d7" weight="{1/(320/Capabilities.screenDPI)}"/></s:stroke>
				</s:Line>
				<components:next right="{20/(320/Capabilities.screenDPI)}" verticalCenter="0"/>
				<s:Label text="Change Password" left="{30/(320/Capabilities.screenDPI)}"
						 verticalCenter="0" verticalAlign="middle" 
						 textAlign="center" mouseEnabled="false"
						 styleName="textsize1"  color="#474646"/>
			</s:Group>
			<s:Group width="100%" height="{100/(320/Capabilities.screenDPI)}"
					 click="navigateToURL(new URLRequest('https://www.scoutcard.ca/utos'));"
					 mouseOver="gOver(event);"
					 mouseOut="gOut(event);" 
					 mouseUp="gOut(event);" 
					 mouseDown="gDown(event);">
				<s:Rect width="100%" height="100%">
					<s:fill><s:SolidColor alpha="1" color="#FFFFFF"/></s:fill>
				</s:Rect>
				<s:Line  left="0" right="0"  bottom="0" > 
					<s:stroke><s:SolidColorStroke color="0xcfd3d7" weight="{1/(320/Capabilities.screenDPI)}"/></s:stroke>
				</s:Line>
				<components:next right="{20/(320/Capabilities.screenDPI)}" verticalCenter="0"/>
				<s:Label text="Terms of Use" left="{30/(320/Capabilities.screenDPI)}"
						 verticalCenter="0" verticalAlign="middle" 
						 textAlign="center" mouseEnabled="false"
						 styleName="textsize1"  color="#474646"/>
			</s:Group>
			<s:Label text="Version 2.0.1" width="100%"  textAlign="center"
					 styleName="textsize1"  color="#bebebe"/>
			<components:signout click="logout()"/>
		</s:VGroup>
	</s:Scroller>
	<s:BusyIndicator visible="{busy}" verticalCenter="0" horizontalCenter="0"/>
</s:View>